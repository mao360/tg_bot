# Развертывание Telegram бота

## Настройка GitHub Secrets

Для работы автоматического развертывания необходимо настроить следующие секреты в настройках репозитория GitHub (Settings → Secrets and variables → Actions):

### Обязательные секреты:
- `HOST` - IP адрес или домен вашего сервера
- `USERNAME` - имя пользователя для SSH подключения
- `SSH_KEY` - приватный SSH ключ для подключения к серверу
- `PORT` - порт SSH (обычно 22)
- `TELEGRAM_BOT_TOKEN` - токен вашего Telegram бота

### Автоматические секреты:
- `GITHUB_TOKEN` - автоматически предоставляется GitHub

## Настройка сервера

1. Убедитесь, что на сервере установлен Docker
2. Настройте SSH доступ с вашего GitHub аккаунта
3. Создайте SSH ключ и добавьте публичный ключ на сервер

## Как это работает

1. При пуше в ветку `main` запускается workflow
2. Собирается Docker образ вашего бота
3. Образ пушится в GitHub Container Registry (ghcr.io)
4. На удаленном сервере:
   - Останавливается старый контейнер
   - Скачивается новый образ
   - Запускается новый контейнер

## Проверка работы

После успешного развертывания вы можете проверить статус контейнера:

```bash
ssh username@your-server
docker ps | grep tg-bot
docker logs tg-bot
```

## Структура проекта

- `.github/workflows/deploy.yml` - конфигурация GitHub Actions
- `Dockerfile` - конфигурация Docker образа
- `main.go` - исходный код бота
